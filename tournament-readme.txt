┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓

　箱庭トーナメント２ readme -2004/11/10更新-
　　By　Kyosuke Takayama (ドン・ガバチョ) support@mc.neweb.ne.jp
　　　配布サイト　(http://espion.just-size.jp/archives/dist_hako/)

┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫

　○スクリプト配布元

・箱庭諸島２配布元（現在は配布終了）
  オリジナル箱庭諸島２
  http://t.pos.to/hako/

・ＪＡＶＡスクリプト版箱庭諸島配布元
  あっぽー箱庭諸島
  http://appoh.execweb.cx/hakoniwa/

・オリジナルスクリプトや改造スクリプトの配布元
  HAKO-JAPAN　箱庭諸島ファンサイト
  http://www.nn.iij4u.or.jp/~flora/


┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫

　○ご質問はこちらへ・・・

・箱庭トーナメントで修正された個所に関するご質問は
	「サポート掲示板」に
　http://espion.just-size.jp/tdboard/?d=support

・通常の箱庭２に関する質問は、オリジナル配布元の
	「意見・質問・雑談・その他」掲示板に
　http://t.pos.to/hako

・スクリプト設置等に関するご質問は、Tsubasa's HomePageの
	「ＣＧＩ駆け込み寺」に
　http://village.infoweb.ne.jp/~sakatuba/

・ＪＡＶＡスクリプト版での修正個所や設置に関するご質問は、
	「Java Script 版箱庭 サポート掲示板」までお願いします。
　http://hpcgi1.nifty.com/kattin-DX/jssup/js_sup.cgi


┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫

　○免責

  使用者の責任において使用してください。
　作者は、いかなる損害・トラブルにも一切責任は負わないものとします。

  
┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫

　○設置方法

　通常の箱庭諸島２が設置出来れば特に問題はありません。
　最初にhako-ini.cgiで設定を行ってから設置して下さい。


　＊追加されているファイルの説明です
　hako-ini.cgi
　　各種設定のファイルです
　hako-help.cgi
　　設定一覧や、マニュアルを表示するためのファイルです
　hako-js.cgi
　　JavaScript版の開発画面で開発するためのファイルです
　access.cgi
　　アクセスログ閲覧用のCGIです

　hako-*.cgi のファイルに新しいパーミッション等を設定する必要はありません。
　hako-turn.cgi等と同じように設置して下さい。 
　access.cgi には実行権限が必要です。
　Perl のパスを確認し、hako-main.cgi 等と同じパーミッションを設定して下さい。
　また、内部でパスワードの設定も行っていますので、こちらも設定します。

　設置禁止のサーバー等もありますので、オリジナルの配布元、及び　当配布
　ページもよくお読みの上設置して下さい。

　imgexpフォルダには、画像のローカル設定用の説明ファイルが入ってます。
　ただし、画像は同梱されてませんので、圧縮したファイルをアップしておく
　必要があります。


┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫

　○設定について

　以下はhako-ini.cgiで設定する項目の説明です。

　◇セキュリティに関する項目
　hako-ini.cgiで設定を行えますが、以下の項目は必ず変更して下さい。
　変更しないと、セキュリティ上問題が生じ、参加者に迷惑が掛かります。

　$masterPassword　管理人用のマスターパスワードです
　$HspecialPassword　同じくスペシャルパスワードです
　$HdirName　データファイルが保存されているディレクトリです
　$Hdirmdata　同じく対戦前の島の状態が保存されているディレクトリです


　◇追加・変更されている設定個所

　・ロックの方式
　ロックの方式が二種類になりました。
　一つは、従来からある、信頼性の高いflockの方式です。

　もう一つは、こちら(http://www.din.or.jp/~ohzaki/perl.htm#File_Lock)を
　参考にして作ったものです。
　160島3時間更新の改造箱庭で、データが飛んだ事はありません。
　こちらを使用する場合は、lockfileというファイルを、
　cgiと同じディレクトリに置いて下さい。
　どんなプラットフォームでも動作しますので、
　flock方式がうまく動かない場合は、こちらを使用して下さい。

　・デバッグモード
　デバッグモードで動作させる場合は、$HdeveRepCount、$HdeveRepCount、
　$HfightRepCountの値が自動的に1になります。
　これは、ターンをまとめて更新する処理が少し特殊なため、
　デバッグ中は、1ターンずつ更新させるようにした方がいいと判断したためです。

　・ミサイルログの簡略化
　ミサイル発射のログを自島の分は表示しないようにするものです。
　この設定を行えば、サーバーの負担軽減に繋がります。

　・その他
　hako-mente.cgiのメンテ用パスワードは、hako-ini.cgiで設定した、
　$masterPasswordです。


　◇特殊設定

　・埋め立ての簡易化
　これを設定すると、海を埋め立てした場合、浅瀬を飛ばして荒地になります。
　つまり、陸地に面している部分なら二度埋めしなくても、陸地に出来るのです。
　通常版同様浅瀬は発生しますが、特に関係ありません。


┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫

　○アクセスログ

　acce_logディレクトリに日毎にログを保存してあります。
　保存されるタイミングは、「開発画面に入る」「計画を送信する」
　「コメントを変更する」「開発画面から観光者通信に書き込みする」場合です。
　ファイルは無制限に増えますので、
　ある程度時期が過ぎたら手動で削除して下さい。

　参照する場合は、access.cgi で確認して下さい。
　怪しい島は、青色ラインで表示されます。
　「IPカット」にチェックをすると、IPアドレスの最後の区切りの部分を無視して表示します。
　ダイヤルアップ等でIPアドレスが変わっても追いかけやすくなってますが、
　一般ユーザー同士も青色として表示される事もありますので、気を付けてください。


┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫

　○hako-mente.cgiのメンテナンスモードについて

　データファイルが破損して、バックアップからデータを復旧させる場合、
　復旧直後にアクセスされるとターンが進んでしまいます。

　これを防ぐために、メンテナンスモードに入ってから作業すれば、
　ブラウザからアクセスする事が出来ませんので、安心です。


┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫

　○改造について

　オリジナルの箱庭の使用条件にそって、改造するのは自由ですが、
　難しい部分がありますので、注意しておきます。

　◇コマンドの追加
　追加自体はそれほど難しくありません。
　JavaScript版の開発画面にて、メニューを表示する所があると思いますが、
　このメニューは、画面の枠内からはみ出さないように微調整されています。

　コマンドを追加した場合は、このメニューが長くなるので、
　その部分を調整し直さないといけません。
　hako-js.cgiの332行目付近のshowMenuという関数内です。


　その他の部分に関しては、恐らく問題なく改造出来るかと思います。


┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫

　○ひとこと

　オリジナル設定のトーナメントばかりが蔓延してしまい、
　参加者が場所選びに新鮮味を味わえないため、今回のバージョンより、
　設定個所が少し増えました。

　農場や工場の偽装、ミサイル基地を丸見えにするなど、
　Perlに詳しくなくても簡単に設定出来るようになっております。
　食料の消費率を0にしたりするのもいいでしょう。

　これらの特徴を生かして、是非オリジナルトーナメントの開催を行って下さい。


　設置終えたら、是非当サイトのトーナメントリンク集に登録して下さい。
　トーナメントメーリングリストなるものもありますので、
　そちらで宣伝して頂いても構いません。


┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫

　○今後の予定

　◇ｉモードからも計画の入力・参照が出来るようにする
　◇報酬金設定の追加
　◇特殊設定の追加
　◇管理人のみ島が登録可能
　◇管理人権限で強制島削除機能
　◇スクリプト記述の簡略化


┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫

　○更新履歴

　◇2004/06/03 11:00　　Ver.0.92　配布元URLの変更
　◇2004/04/27 14:00　　Ver.0.91　NN系ブラウザでステータスバーに地形情報が表示されない問題を修正
　　                　　        　余計な変数名を削除 (Thx. NONさん)
　　                　　        　準決勝との表示がなされない問題の修正 (Thx. NONさん)
　◇2004/02/18 14:00　　Ver.0.90　マップサイズが奇数の際のバグ修正 (Thx. チヨリスタさん)
　　                　　        　たまに浅瀬が少ない島が出来てしまうバグ修正 (Thx. チヨリスタさん)
　　                　　        　window.open時のバグ修正
　　                　　        　IE6でレイアウトが崩れてしまうバグ修正(多分)
　　                　　        　XSS脆弱性対策(2)
　◇2003/10/28 11:00　　Ver.0.88　XSS脆弱性対策(1)
　◇2003/07/02 18:00　　Ver.0.87　ログ表示のバグ修正
　◇2003/05/07 21:00　　Ver.0.86　ターン進行行程の不具合を解消
　　                　　        　アクセスログ記録方式変更
　　                　　        　アクセスログ読み取りスクリプト作成
　　                　　        　簡易重複チェック機能を搭載
　◇2002/05/02 22:00　　Ver.0.84　開発期間のまとめ更新の際の不具合解消
　◇2001/12/31 10:00　　Ver.0.83　対戦の記録表示不具合解消
　◇2001/12/10 17:00　　Ver.0.82　対戦の記録表示不具合解消
　◇2001/12/05 22:00　　Ver.0.81　配布開始


┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫

　○最後に・・

　配布に至るまでに、沢山の方の協力を頂きました。
　テスト版に参加して下さった方、意見を言って頂いた方、
　この場をお借りしまして、感謝致します。
　みなさんの協力が無ければ、到底完成しなかったでしょう。
　本当に有難う御座います。


　バグ等を発見した場合は、遠慮なさらずにどんどんお知らせ下さい。
　メールでも掲示板でも手段は問いません。
　何卒、宜しくお願い致します。m(_ _)m

┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
